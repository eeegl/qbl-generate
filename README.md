# QBL Question Generation

> *Updated "version 2" of the generation script.*

This script lets you automatically generate questions for a Question Based Learning (QBL) course using AI!


## How it works

A course is generated by following a few simple steps:

0. Setup your Python environment
1. Specify the course in a skillmap
2. Create a prompt for the type of question you want
3. Run the script ([`generate.py`](src/generate.py))

The script then feeds each skill in the skillmap to the OpenAI [Chat Completions API](https://platform.openai.com/docs/guides/text-generation/chat-completions-api), together with the user defined prompt.  Responses are saved in a folder structure that mirrors the skillmap.

You can specify multiple prompts, but only one at a time can be used.

Use the `-h` flag to show how to use the script:

```bash
python generate.py -h
```

See the rest of the README for more details.

## How to run it

The script runs using the configuration in [`config.yaml`](config.yaml). However, you can override the configured behavior by passing options when running.

You must specify either of these options when generating:

- `-a/--all` generates all skills for the whole course
- `-u/--units` generates for a list of units
- `-s/--skills` generates for a list of skills

If multiple of these are given they take precedence in the order:

1. `-s/--skills`
2. `-u/--units`
3. `-a/--all`

### Examples

These are examples to get you up and running quickly. Use the `-h/--help` option for more details.

```bash
# View help
python generate.py -h
```

```bash
# Generate the whole course
python generate.py -a
```

```bash
# Generate a list of units
# NOTE: must be the exact same "name" as in the skillmap
python generate.py -u "Week 1 - Concurrency Conundrums" "Week 3 - Parallel Performance"
```

```bash
# Generate a list of skills, not necessarily from the same unit
# NOTE: must be the exact same "name" as in the skillmap
python generate.py -s "Using Channels" "Go Language Basics 2"
```

```bash
# Use custom number of questions per skill and a custom prompt and timeout
python generate.py --timeout 120 --num-questions 5 --prompt ranking.md --all
```

```bash
# Use Chat GPT 3 and bypass improvement
python generate.py --improvement-enabled false --gpt-model gpt-3.5-turbo --all
```

```bash
# Don't prepend the current config to the output file
python generate.py --logging-enabled false --all
```

## Skillmap

<!-- Folders:

- `prompts/` stores user defined prompts
- `responses/` stores the generated questions
- `src/` stores the script and other source files

Files: 

- `srs/generate.py` the script
- `skillmap.yaml` contains the skillmap
- `config.yaml` contains the script configuration
- `requirements.txt` contains the script dependencies -->

The skillmap breaks up the course into a list of units, each unit containting a list of skills. It is stored in [`skillmap.yaml`](skillmap.yaml) and written in [YAML](https://spacelift.io/blog/yaml) format for simplicity and syntax highlighting.

## Prompts

Prompts are specified in separate files. These are in [Markdown](https://www.markdownguide.org/basic-syntax/) by default to increase readability, but don't need to be.

The skill is inserted by replacing the anchor `$SKILL$` in the prompt

## Improvement

The generation process uses two steps:

1. An initial generation
2. An iterative improvement step

Improvement is enabled by default. This can be bypassed for efficiency, at the risk of generating questions of a lower quality.

## Config

The [`config.yaml`](config.yaml) file contains the script configuration. Change this if you want to avoid passing the same options over and over.
